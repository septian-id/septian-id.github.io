<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" type="text/css" href="./css/display.css">
    <title></title>
</head>
<body>
    <div class="window">
      <div class="title-bar">
        <div class="title-bar-text">Stars WiFi</div>
        <div class="title-bar-controls">
          <button aria-label="Minimize"></button>
          <button aria-label="Maximize"></button>
          <button aria-label="Close"></button>
        </div>
      </div>
      <div class="window-body">
        <section class="tabs">
          <menu role="tablist" aria-label="Sample Tabs">
            <button id="btnVoucher" class="btnMenu" role="tab" aria-controls="tab-A" aria-selected="true">Voucher</button>
            <button id="btnMember" class="btnMenu" role="tab" aria-controls="tab-B" aria-selected="false">Member</button>
            <button id="btnQRcode" class="btnMenu" role="tab" aria-controls="tab-C" aria-selected="false">QR Code</button>
            <button id="btnDaftarHarga" class="btnMenu" role="tab" aria-controls="tab-D" aria-selected="false">Daftar Harga</button>
          </menu>
          <!-- FORM LOGIN -->
          <article id="frmLogin" role="tabpanel" id="tab-A">
            <p align="right"><a class="trial blink" href="#">Trial Gratis</a></p>
            <p align="center" id="loginMode">Masukan kode voucher</p>
               <table width="100%">
                  <tr>
                    <td width="75"><img id="imgMode" src="./img/voucher.png" width="100" height="75"></td>
                    <td>
                      <input id="txtUser" class="inputBox" type="text" name="username" placeholder="Kode Voucher" value="">
                      <input id="txtPass" class="inputBox" type="hidden" name="password" placeholder="Password">
                    </td>
                  </tr>
                </table>

                <section class="field-row" style="justify-content: flex-end; margin-top: 5px;">
                  <button>Masuk</button>
                </section>
          </article>

          <!-- QR CODE READER -->
          <article id="frmQRcode" role="tabpanel" hidden id="tab-C">
            <div id="msg"></div>
            <div id="reader" class="reader"></div>
            <!-- <input type="file" id="qr-input-file" accept="image/*"> -->
            <input type="file" id="qr-input-file" accept="image/*" capture>
          </article>

          <!-- DAFTAR HARGA -->
          <article id="frmDaftarHarga" role="tabpanel" hidden id="tab-D">
            <table>
              <tr style="background: #CCC;">
                <th width="50">Paket</th>
                <th>Harga</th>
                <th>Aktif</th>
              </tr>
              <tr>
                <td>1</td>
                <td>Rp 2.000</td>
                <td>3 JAM</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Rp 3.000</td>
                <td>5 JAM</td>
              </tr>
              <tr>
                <td>3</td>
                <td>Rp 5.000</td>
                <td>10 JAM</td>
              </tr>
              <tr>
                <td>4</td>
                <td>Rp 20.000</td>
                <td>1 MINGGU</td>
              </tr>
              <tr>
                <td>5</td>
                <td>Rp 50.000</td>
                <td>1 BULAN</td>
              </tr>
            </table>

            <p align="left" style="border-top:1px solid #CCC; margin-top:10px">
              <br>
              <b>Alamat</b><br>
              Kp.Test, Blok Uji Coba, No.123, Desa WiFi, Kec.Hotspot, Server 12345<br><br>
              <b>Kontak</b><br>
              <ul>
                <li>Telepon : 0812 3456 7890</li>
                <li>E-Mail : wifi@hotspot.com</li>
              </ul>
            </p>
          </article>
        </section>
      </div>
    </div>
    <script src="./js/reader.js"></script>
    <script type="text/javascript">
        document.addEventListener("contextmenu", function(e){ e.preventDefault(); }, false);
        function getID(target){ var result = document.getElementById(target); return result;  }
        function getClass(target){  var result = document.getElementsByClassName(target); return result;  }
        const html5QrCode = new Html5Qrcode(/* element id */ "reader");
        const fileinput = getID('qr-input-file');
        fileinput.addEventListener('change', e => {
          if (e.target.files.length == 0) {
            return;
          }
          const imageFile = e.target.files[0];
          html5QrCode.scanFile(imageFile, /* showImage= */true)
          .then(qrCodeMessage => {
            //alert(qrCodeMessage);
            location.href = qrCodeMessage;
          })
          .catch(err => {
            getID("msg").innerHTML = `${err}`;
          });
        });

        var btnMenu = getClass('btnMenu');
        var txtUser = getID('txtUser');
        var txtPass = getID('txtPass');

        function setPassword(){
          txtUser.value = txtUser.value;
          txtPass.value = txtUser.value;
        }

        txtUser.onkeyup = setPassword;

        for(i=0; i<btnMenu.length; i++){
          btnMenu[i].addEventListener('click', function(){
            for(x=0; x<btnMenu.length; x++){
              btnMenu[x].setAttribute('aria-selected', 'false');
            }
            this.setAttribute('aria-selected', 'true');
            switch(this.innerHTML){
              case "Voucher":
                txtUser.onkeyup = setPassword;
                txtUser.placeholder = "Kode Voucher";
                txtUser.value = "";
                txtPass.value = "";
                txtPass.type = "hidden";
                getID("frmLogin").style.display = "block";
                getID("frmQRcode").style.display = "none";
                getID("frmDaftarHarga").style.display = "none";
                getID("loginMode").innerHTML = "Masukan kode voucher";
                getID("imgMode").setAttribute("src","./img/voucher.png");
              break;
              case "Member":
                txtUser.onkeyup = "";
                txtUser.placeholder = "User ID";
                txtUser.value = "";
                txtPass.value = "";
                txtPass.type = "password";
                getID("frmLogin").style.display = "block";
                getID("frmQRcode").style.display = "none";
                getID("frmDaftarHarga").style.display = "none";
                getID("loginMode").innerHTML = "Masukan username & password.";
                getID("imgMode").setAttribute("src","./img/member.png");
              break;
              case "QR Code":
                getID("frmLogin").style.display = "none";
                getID("frmQRcode").style.display = "block";
                getID("frmDaftarHarga").style.display = "none";
              break;
              case "Daftar Harga":
                getID("frmLogin").style.display = "none";
                getID("frmQRcode").style.display = "none";
                getID("frmDaftarHarga").style.display = "block";
              break;
            }
         }); 
        }
    </script>
</body>
</html>